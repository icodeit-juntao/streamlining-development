# 命令行接口

在很多影视作品中我们经常会看到的一个场景，略显神秘的背景音乐中，一位穿着hoodie的黑客，随意的嚼着口香糖，手指熟练的敲着键盘，黑底绿字的屏幕上一行行的文字快速滚动。黑客时而不屑的轻笑一声，时而表情严肃，最终狠狠的敲击回车键，背景音乐戛然而止，tick tick，屏幕显示某个进度条进行到100%，黑客一脸轻松的往后一靠，躺在椅子上，然后并作出一个搞定的手势。

![Hacking in Film](ch2/hacking.png)

电影当然有其夸张的成分和艺术加工，其中快速的文字滚动很可能是在安装某个软件包的日志等，不过不可否认的是，这种操作看起来确实很酷。

我们在第一小节中，正是要学习这种酷炫的技术：shell和命令行。

- shell prompt
- 命令行工具的组成：命令，脚本，开关和选项

命令行工具和Shell是计算机操作系统中的基础组件，它们为用户和系统之间的交互提供了桥梁。和图形界面类似，命令行工具，也被称为CLI（Command-Line Interface），是一种允许用户通过键入文本命令来与计算机系统进行交互的接口。

这些命令可以用来执行各种任务，如文件操作（复制、移动、删除等），系统管理（启动或停止服务、安装或卸载程序等），甚至网络通信（如SSH）等。换句话说，通过命令行你可以完成大部分你需要计算机完成的任务。

一个具体的例子是，你既可以通过鼠标点击“Finder”程序的图标来启动你的文件管理器，也可以在Terminal中敲入”open .”来启动”Finder”应用程序（前提是你已经将code的可执行文件设置到了环境中），两者殊途同归。

![Finder应用](ch2/finder.png)

和命令行接口关系紧密的一个应用程序是Shell（外壳程序），Shell是一种特殊的命令行工具，它提供了一种脚本语言，用户可以使用这种语言来编写自动化任务的脚本。在Unix和类Unix系统（如Linux和macOS）中，Bash（Bourne Again Shell）是最常见的shell，而在Windows中，最常见的shell是PowerShell。

Shell可以理解为用户与系统内核进行交互的媒介。用户在shell中输入命令，然后shell将这些命令转发给系统内核执行，然后将执行结果返回给用户。因此，熟练使用shell对于高效地使用计算机系统来说至关重要。

在Mac上，Terminal是一个应用程序，其为用户提供了一个文本界面来运行Shell。你可以把Terminal看作是一个窗口，允许你访问到Shell。当你在Terminal中键入命令时，你实际上是在告诉Shell执行这些命令。

![命令行的输出](ch2/lint.png)

综上所述，命令行工具和shell为我们提供了一种强大且灵活的方式来控制和管理计算机系统。虽然它们可能需要一些时间来学习和熟练使用，但是一旦掌握，它们将极大地提高你的生产力。

## 执行一条命令

我们可以通过一条命令来介绍这本书中会用到的一些术语。一条命令通常由三部分组成，命令（command），参数（argument）和选项（option）。参数和选项在很多时候可以忽略，这时候命令会执行默认的功能，当我们需要特别指明一个命令来执行某项具体任务时，我们可以通过参数和选项来控制。

![Command line interface](ch2/cli.png)

在上述命令中，我们执行了 `npm` 命令，传递的参数为 `install` 和 `html2canvas`，选项为 `—save-dev`。在执行时， `npm` 会根据 `install` 参数来安装 `html2canvas` 包，并依据 `—save-dev` 将这个包安装到开发依赖中（即在最终的产品包中不包含这个依赖）。

你可能会问这些命令从哪儿来？我怎么知道哪些命令可以执行？

在Shell中，你可以执行操作系统内置的命令，例如：文件和目录操作：`ls`（列出目录内容），`cd`（更改目录），`mkdir`（创建目录），`rm`（删除文件或目录），`mv`（移动或重命名文件或目录），`cp`（复制文件或目录）等。我们还可以安装外部的的应用程序，比如安装Node.js之后，我们就可以执行 `npm`命令。

此外，你可以定义自己的命令，通常有两种方式：

1. **别名（Alias）**：你可以使用 `alias` 命令创建一个新的命令别名，这个别名可以代表一个命令或者一系列命令。比如你可以在Terminal中敲入下列命令来创建一个别名 `ll`：
    
    ```bash
    alias ll='ls -l'
    ```
    
    这样，当你在命令行输入 `ll` 并回车时，Shell 实际上会执行 `ls -l` 命令，相当于Shell会为你做一个替换的动作。
    
2. **Shell脚本**：你可以创建一个Shell脚本文件，然后在文件中编写一系列的命令。这个文件就相当于一个新的命令。你需要给文件添加执行权限，然后就可以像普通命令一样执行这个文件了。比如你创建了一个名为 `hello.sh` 的文件：
    
    ```bash
    #!/bin/sh
    
    echo "Hello, world!"
    ```
    
    然后给这个文件添加执行权限：
    
    ```bash
    chmod +x hello.sh
    ```
    
    这样，你就可以通过 `./hello.sh` 命令来运行这个脚本了。
    

我们在本书中会着重介绍和使用第二种方式：Shell脚本。在一个脚本中你可以定义很多条不同的命令，比如第一步下载一个文件，第二本解析该文件，第三部根据文件中的某个字段来触发另一个动作等等。我们将在构建脚本这一章中详细讲解。

以上就是所有的准备工作，我们了解了Shell和命令行接口的基本知识，在接下来的内容中，我们将通过实现**今日箴言**应用来进一步学习如何定义构建脚本，以及如何使用脚本来自动化编程任务。